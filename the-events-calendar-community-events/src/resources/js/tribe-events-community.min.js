/**
 * This JS file was auto-generated via Terser.
 *
 * Contributors should avoid editing this file, but instead edit the associated
 * non minified file file. For more information, check out our engineering docs
 * on how we handle JS minification in our engineering docs.
 *
 * @see: https://evnt.is/dev-docs-minification
 */

var tribe_community_events=tribe_community_events||{};!function(window,$,obj){"use strict";obj.$window=$(window),obj.$datepickers=$(),obj.$timepickers=$(),obj.els={uploadArea:document.querySelector(".tribe-image-upload-area"),uploadFile:document.getElementById("uploadFile"),eventImage:document.getElementById("event_image"),detachThumbnail:document.getElementById("tribe-events-community-detach-thumbnail")},obj.date_to_ymd=function(date){var d=date.getDate(),m=date.getMonth()+1;return date.getFullYear()+"-"+(m<=9?"0"+m:m)+"-"+(d<=9?"0"+d:d)},obj.init_linked_posts_handle=function(){var handle=$(".move-linked-post-group"),trigger=$(".saved-linked-post");handle.addClass("hidden"),trigger.on("change",(function(){$(trigger).closest(handle).removeClass("hidden"),$(this).find(handle).removeClass("hidden")}))},obj.init_mobile_datetime_input=function(){obj.$datepickers=$("#EventStartDate, #EventEndDate"),obj.$timepickers=$("#EventStartTime, #EventEndTime"),obj.$window.on({"resize.tribe":function(){obj.$window.width()<=568?(obj.$datepickers.on("change.tribe",obj.on_change_datepicker).trigger("change"),void 0!==$.fn.tribeTimepicker?obj.$timepickers.tribeTimepicker("option","disableTouchKeyboard",!0):obj.$timepickers.timepicker("option","disableTouchKeyboard",!0)):(obj.$datepickers.prop("type","text"),obj.$datepickers.off("change.tribe"),void 0!==$.fn.tribeTimepicker?obj.$timepickers.tribeTimepicker("option","disableTouchKeyboard",!1):obj.$timepickers.timepicker("option","disableTouchKeyboard",!1))},load:function(){obj.$window.trigger("resize.tribe")}})},obj.on_change_datepicker=function(){var $field=$(this),$other=obj.$datepickers.not($field),type="start",instance=$(this).data("datepicker"),date=$.datepicker.parseDate(instance.settings.dateFormat||$.datepicker._defaults.dateFormat,$field.val(),instance.settings),other_date=$.datepicker.parseDate(instance.settings.dateFormat||$.datepicker._defaults.dateFormat,$other.val(),instance.settings);"EventEndDate"!==$field.attr("name")&&"EventEndDate"!==$field.attr("id")||(type="end"),"start"===type?($other.attr("min",obj.date_to_ymd(date)),other_date<date&&$other.val(obj.date_to_ymd(date))):other_date>date&&$other.val(obj.date_to_ymd(date))},obj.init_local_storage=function(){window.localStorage&&$(".tribe-toggle-column").on("change",(function(){var $button=$(this),id=$button.attr("id");$button.is(":checked")?window.localStorage.removeItem(id):window.localStorage.setItem(id,"1")})).each((function(){var $button=$(this),id=$button.attr("id");window.localStorage.getItem(id)&&$button.prop("checked",!1).trigger("change")}))},obj.init_image_input=function(){var $uploadArea=$(obj.els.uploadArea);$(obj.els.eventImage).on("change",(function(){var clean=this.value.split("\\").pop();obj.els.uploadArea.classList.add("uploaded"),obj.els.detachThumbnail.setAttribute("value",!1),obj.els.uploadFile.setAttribute("value",clean),obj.els.uploadFile.setAttribute("size",clean.length)})),$uploadArea.on("click",".tribe-remove-upload a",(function(e){e.preventDefault(),obj.removeEventImage()})),$uploadArea.on("click",".submitdelete",(function(e){e.preventDefault(),obj.removeEventImage(),obj.detachThumbnail()}))},obj.removeEventImage=function(){obj.els.uploadArea.classList.remove("uploaded"),obj.els.uploadArea.classList.remove("has-image"),obj.els.uploadFile.setAttribute("value",""),obj.els.eventImage.setAttribute("value","")},obj.detachThumbnail=function(){obj.els.detachThumbnail.setAttribute("value",!0)},obj.init_list_columns_menu=function(){var $display_options=$(".table-menu");$(".table-menu-btn").on("click",(function(){return $(this).toggleClass("menu-open").parent().find(".table-menu").toggleClass("table-menu-hidden"),!1})),$(document).on("click",(function(e){$(e.target).is($display_options)||$(e.target).is($($display_options).find("*"))||$($display_options).addClass("table-menu-hidden")}))},obj.remove_no_js_class=function(){$(document.getElementById("tribe-events")).removeClass("tribe-no-js").addClass("tribe-js")},obj.datetime_selectors=function(){"object"==typeof tribe_dynamic_helper_text&&tribe_dynamic_helper_text.event_date_change()},obj.is_form_field_empty=function(field_name,form_state){for(var i=0;i<form_state.length;i++){if("undefined"!=typeof tinyMCE&&null!==tinyMCE.get(field_name))return""===tinyMCE.get(field_name).getContent();if(field_name==form_state[i].name)return""===form_state[i].value}return!1},obj.add_js_form_errors=function(fields){var $form_wrapper=$("#tribe-community-events");$form_wrapper.find(".tribe-community-js-notice").remove();var $notice=$("<div />",{class:"tribe-community-notice tribe-community-js-notice tribe-community-notice-error"});$notice.insertBefore($form_wrapper.find("form"));for(var i=0;i<fields.length;i++)if(void 0!==tribe_submit_form_i18n.errors[fields[i]]){var noticeText=tribe_submit_form_i18n.errors[fields[i]];$("<p />",{text:noticeText}).appendTo($notice)}},obj.disallow_submission_while_creating_linked_posts=function(){$("#tribe-community-events form").on("submit",(function(e){var $form=$(this),error_fields=[];return $form.find(".required").each((function(index){if("checkbox"===$(this).attr("type")&&!$(this).prop("checked"))return error_fields.push($(this).attr("name")),!0;let val_is_empty=""===$(this).val();$(this).is(".wp-editor-area")&&tinyMCE&&tinyMCE.activeEditor?!tinyMCE.activeEditor.getContent()&&val_is_empty&&error_fields.push($(this).attr("name")):val_is_empty&&error_fields.push($(this).attr("name"))})),!error_fields.length||(obj.add_js_form_errors(error_fields),$("html, body").animate({scrollTop:$form.closest("#tribe-community-events").offset().top},300),!1)}))},obj.delete_post=function(){$(".delete.wp-admin.events-cal .submitdelete").on("click",(function(e){if(e.preventDefault(),!$(e.target).data("event_id"))return!1;if(!confirm("Are you sure you want to delete this event? This cannot be undone!"))return!1;var target=e.target,event_id=target.dataset.event_id,nonce=target.dataset.nonce,$parent_row=$(target.closest("tr")),recurring=target.dataset.recurring;return $.ajax({url:TEC.ajaxurl,method:"GET",data:{action:"tribe_events_community_delete_post",nonce:nonce,id:event_id},success:function(response){!0===response.success&&$parent_row.fadeOut((function(){$parent_row.remove()}))},complete:function(response){var response_data=$.parseJSON(response.responseText);alert(response_data.data),"1"!==recurring||location.reload()}}),!1}))},$((function(){obj.init_mobile_datetime_input(),obj.init_image_input(),obj.init_list_columns_menu(),obj.init_local_storage(),obj.init_linked_posts_handle(),obj.remove_no_js_class(),obj.datetime_selectors(),obj.disallow_submission_while_creating_linked_posts(),obj.delete_post()}))}(window,jQuery,tribe_community_events);